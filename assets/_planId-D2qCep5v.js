import{aU as h,r as i,j as e,L as d,B as l,aV as j,t as N}from"./index-CT-BcIIy.js";import{A as b}from"./accent-card-BuaCNFwP.js";import{c as v}from"./investments-D_PGcF3p.js";import{L as g}from"./loader-circle-CFamo-1W.js";import"./card-CJue5Hbx.js";import"./proxy--RmzU9uW.js";const A=function(){const{plan:s,balances:r}=h.useLoaderData(),[c,m]=i.useTransition(),[n,u]=i.useState(null),x=a=>`$${parseFloat(a).toFixed(2)}`,t=()=>n?parseFloat(r[n])>=s.price:!1,p=i.useMemo(()=>Object.values(r).some(a=>parseFloat(a)>=s.price),[r,s.price]),f=()=>{!n||!t()||m(async()=>{try{await v({planId:s.id,currency:n}),j({to:"/dashboard/investment-history"})}catch(a){console.error("Error creating investment:",a),N.error(a instanceof Error?a.message:"An error occurred while creating the investment.")}})};return e.jsx("div",{className:"h-full flex flex-col items-center mt-10 w-full",children:e.jsx(b,{title:s.type,description:s.description,footer:e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[n&&!t()&&e.jsxs("div",{className:"text-red-500 text-sm space-y-2 w-full",children:[e.jsxs("p",{children:["Insufficient balance. You need $",s.price," in your"," ",n," account."]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(d,{to:"/dashboard/deposit",className:"flex-1",children:e.jsx(l,{variant:"outline",className:"w-full",children:"Deposit Funds"})}),p&&e.jsx(d,{to:"/dashboard/transfer",className:"flex-1",children:e.jsx(l,{variant:"outline",className:"w-full",children:"Transfer Funds"})})]})]}),e.jsxs(l,{onClick:f,className:"cursor-pointer w-full",disabled:!n||!t()||c,children:[n?`Invest $${s.price} from ${n} account`:"Select an account",c&&e.jsx(g,{className:"mr-2 animate-spin"})]})]}),footerClassName:"w-full",className:"max-w-2xl w-sm mx-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-3xl font-bold",children:["$",s.price]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ROI Range:"}),e.jsxs("span",{className:"font-medium",children:["$",s.minRoiAmount," - $",s.maxRoiAmount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commission:"}),e.jsxs("span",{className:"font-medium",children:[s.commission,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Percentage:"}),e.jsxs("span",{className:"font-medium",children:[s.percentage,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.duration," days"]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select account to invest with:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(r).map(([a,o])=>e.jsx("div",{onClick:()=>u(a),className:`
                    p-3 border rounded-lg cursor-pointer transition-colors
                    ${n===a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}
                  `,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:a}),e.jsx("span",{className:parseFloat(o)>=s.price?"text-green-600":"",children:x(o)})]})},a))})]})]})})})};export{A as component};
