import{r as t,j as e,B as d,L,t as g}from"./index-e8ay9PhV.js";import{B as c}from"./badge-oO7hVTtl.js";import{T as S,a as y,b as m,c as r,d as E,e as a}from"./table-CzsW8ICP.js";import{S as I,a as w,b as T,c as A,d as n}from"./select-Pv49NWVV.js";import{g as D,a as F}from"./investments-ClhjANEO.js";import{T as B}from"./trending-up-LN0GVP2w.js";import{F as P}from"./filter-pWqOgJrR.js";import{L as V}from"./loader-circle-uvu4pR17.js";import{E as k}from"./external-link-D1ZIde-6.js";import"./index-DpyfSV-Y.js";import"./index-D0FvQQqB.js";import"./chevron-down-C5hn9Wol.js";import"./check-Mh_ZTpYM.js";function R(){const[l,f]=t.useState([]),[x,u]=t.useState([]),[o,h]=t.useState(!0),[i,p]=t.useState("ALL"),j=async()=>{try{h(!0);const s=await F();f(s),u(s)}catch{g.error("Failed to fetch your investment history")}finally{h(!1)}};t.useEffect(()=>{let s=l;i!=="ALL"&&(s=s.filter(C=>C.status===i)),u(s)},[i,l]);const v=s=>new Date(s).toLocaleString(),N=s=>`${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:8})}`,b=s=>{switch(s){case"ACTIVE":return e.jsx(c,{className:"bg-green-500",children:"Active"});case"COMPLETED":return e.jsx(c,{className:"bg-blue-500",children:"Completed"});case"CANCELLED":return e.jsx(c,{variant:"destructive",children:"Cancelled"});default:return e.jsx(c,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return t.useEffect(()=>{j()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Investments"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:j,variant:"outline",disabled:o,className:"cursor-pointer",children:o?"Loading...":"Refresh"}),e.jsx(d,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(L,{to:"/dashboard/plans",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Invest Now"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(I,{value:i,onValueChange:p,children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(T,{placeholder:"Filter by Status"})}),e.jsxs(A,{children:[e.jsx(n,{value:"ALL",children:"All Statuses"}),e.jsx(n,{value:"PENDING",children:"Pending"}),e.jsx(n,{value:"ACTIVE",children:"Active"}),e.jsx(n,{value:"COMPLETED",children:"Completed"}),e.jsx(n,{value:"CANCELLED",children:"Cancelled"})]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(V,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(S,{children:[e.jsx(y,{children:e.jsxs(m,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Plan"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Details"})]})}),e.jsx(E,{children:x.length===0?e.jsx(m,{children:e.jsx(a,{colSpan:6,className:"text-center py-8",children:l.length===0?"No investments found":"No investments match your filter criteria"})}):x.map(s=>e.jsxs(m,{children:[e.jsx(a,{children:v(s.createdAt)}),e.jsx(a,{className:"font-mono text-sm",children:s.planId.substring(0,8)+"..."}),e.jsx(a,{className:"font-medium",children:N(s.amount)}),e.jsxs(a,{children:[b(s.status),s.status==="ACTIVE"&&e.jsx("div",{className:"text-xs text-green-500 mt-1"})]}),e.jsx(a,{className:"text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",onClick:()=>{g.promise(D(s.id),{loading:"Loading investment details...",success:()=>"Investment details loaded",error:"Failed to load investment details"})},children:e.jsx(k,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Y=function(){return e.jsx(R,{})};export{Y as component};
