import{r as o,u as N,z as i,j as e,B as R}from"./index-Cn3qFwNA.js";import{A as B}from"./accent-card-D3VzAYr7.js";import{u as E,s as W,F as Q,a as d,b as m,c as u,d as x,e as j,f as U,g as q}from"./form-success-CtEQIy5G.js";import{I as S}from"./input-BFG3t4H0.js";import{S as H,a as O,b as V,c as A,d as r}from"./select-Boe8a_aQ.js";import{u as I}from"./wallets-D41DoK7i.js";import{L as z}from"./loader-circle-aQEBN9NX.js";import"./card-Awdj3cbH.js";import"./proxy-DHFsrLxE.js";import"./label-Z2UWEDJA.js";import"./triangle-alert-2P4b2tFH.js";import"./circle-check-CpV6rbvP.js";import"./index-DjhMqF0M.js";import"./index-Cl_kZc5Z.js";import"./chevron-down-Biox4XNV.js";import"./check-D8ERr2HG.js";const D=i.object({currency:i.enum(["BTC","ETH","USDT","SOL","BNB","LTC"],{required_error:"Currency is required"}),address:i.string().min(1),wallQRCode:i.instanceof(File,{message:"Wallet QR Code is required"}).refine(p=>p.size<=5*1024*1024,{message:"File size must be less than 5MB"})}),le=function(){const[a,g]=o.useTransition(),[w,h]=o.useState(""),[v,f]=o.useState(""),[t,y]=o.useState(),b=N(),l=E({resolver:W(D),defaultValues:{currency:void 0,address:"",wallQRCode:void 0}});function F(s){h(void 0),f(void 0),g(async()=>{try{await I(s.currency,s.address,s.wallQRCode),f("Wallet uploaded successfully"),b({to:"/admin/wallets"})}catch(n){h(n instanceof Error?n.message:"Failed to upload KYC documents")}})}return o.useEffect(()=>()=>{t&&URL.revokeObjectURL(t)},[t]),e.jsx("div",{className:"h-full flex justify-center mt-10 container max-w-2xl w-full mx-auto",children:e.jsx(B,{className:"max-w-2xl mx-auto lg:w-2xl md:w-xl sm:w-lg",title:"Wallets",description:"View, Manage, and Create wallets to let users deposit and withdraw funds",children:e.jsx(Q,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(F),className:"space-y-6",children:[e.jsx(d,{control:l.control,name:"currency",disabled:a,render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"Wallet Currency"}),e.jsxs(H,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(x,{children:e.jsx(O,{children:e.jsx(V,{placeholder:"Select wallet currency"})})}),e.jsxs(A,{children:[e.jsx(r,{value:"BTC",children:"BTC"}),e.jsx(r,{value:"ETH",children:"ETH"}),e.jsx(r,{value:"USDT",children:"USDT"}),e.jsx(r,{value:"SOL",children:"SOL"}),e.jsx(r,{value:"BNB",children:"BNB"}),e.jsx(r,{value:"LTC",children:"LTC"})]})]}),e.jsx(j,{})]})}),e.jsx(d,{control:l.control,name:"address",disabled:a,render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{children:"Wallet Address"}),e.jsx(x,{children:e.jsx(S,{...s,type:"text",placeholder:"1FfmbHfnpaZjKFvyi1okTjJJusN455paPH",required:!0})}),e.jsx(j,{})]})}),e.jsx(d,{control:l.control,name:"wallQRCode",disabled:a,render:({field:{value:s,onChange:n,...T}})=>e.jsxs(m,{children:[e.jsx(u,{children:"Wallet QR Code"}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{type:"file",accept:"image/*",onChange:L=>{var C;const c=(C=L.target.files)==null?void 0:C[0];c&&(n(c),y(URL.createObjectURL(c)))},...T,required:!0}),t&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:t,alt:"QR Code preview",className:"max-w-[200px] rounded-lg border"})})]})}),e.jsx(j,{})]})}),e.jsx(U,{message:w}),e.jsx(q,{message:v}),e.jsx(R,{disabled:a,type:"submit",className:"w-full",children:a?e.jsx(z,{className:"h-4 w-4 animate-spin"}):"Add Wallet"})]})})})})};export{le as component};
