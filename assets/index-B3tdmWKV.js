import{s as V,u as _,r as i,j as e,B as c,aB as q,t as j,aC as G,aD as J,aE as K}from"./index-Ckkvuujd.js";import{B as z}from"./badge-dIKJQ4tX.js";import{D as W,a as X,b as Y,c as Z,d as ee,e as se}from"./dialog-BZB3DbQi.js";import{T as te,a as ae,b as C,c as o,d as re,e as l}from"./table-CyhYI2xP.js";import{I as ie}from"./input-Bjq3SFI6.js";import{T as b,C as T}from"./checkbox-CaNFJZFm.js";import{A as ce,a as le,b as ne,c as oe,d as de,e as me,f as he,g as ue}from"./alert-dialog-DfUr0KF9.js";import{S as xe}from"./search-D0LXfhml.js";import{L}from"./loader-circle-ByqrKCx2.js";import{E as je}from"./eye-CiXj1OFW.js";import"./index-CQWN3qM6.js";import"./check-DRFK1lWj.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],fe=V("CirclePlus",ge);function pe(){const g=_(),[p,E]=i.useState([]),[F,I]=i.useState([]),[d,N]=i.useState([]),[w,D]=i.useState(!0),[m,U]=i.useState(""),[r,n]=i.useState(new Set),[t,S]=i.useState(null),[B,h]=i.useState(!1),[O,u]=i.useState(!1),[x,P]=i.useState(!1),v=async()=>{try{D(!0);const s=await q();E(s),N(s)}catch{j.error("Failed to fetch products")}finally{D(!1)}},$=async()=>{try{const s=await G();I(s)}catch{j.error("Failed to fetch categories")}};i.useEffect(()=>{v(),$()},[]),i.useEffect(()=>{if(m.trim()==="")N(p);else{const s=m.toLowerCase();N(p.filter(a=>{var f;return((f=a.name)==null?void 0:f.toLowerCase().includes(s))||a.description.toLowerCase().includes(s)||a.id.toLowerCase().includes(s)}))}},[m,p]);const H=async s=>{try{const a=await J(s);S(a),h(!0)}catch{j.error("Failed to fetch product details")}},R=async()=>{if(r.size!==0)try{P(!0),await K(Array.from(r)),j.success(`Successfully deleted ${r.size} product(s)`),n(new Set),v()}catch{j.error("Failed to delete products")}finally{P(!1),u(!1)}},M=s=>{const a=new Set(r);a.has(s)?a.delete(s):a.add(s),n(a)},Q=()=>{r.size===d.length?n(new Set):n(new Set(d.map(s=>s.id)))},y=s=>new Date(s).toLocaleString(),A=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(s)),k=s=>{const a=F.find(f=>f.id===s);return a?a.name:"Unknown"};return e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{onClick:()=>g({to:"/admin/products/new"}),className:"cursor-pointer bg-green-600 hover:bg-green-700",children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Create Product"]}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{type:"text",placeholder:"Search products...",className:"pl-8 pr-4",value:m,onChange:s=>U(s.target.value)})]}),e.jsx(c,{onClick:v,disabled:w,className:"cursor-pointer",children:w?"Loading...":"Refresh"}),r.size>0&&e.jsxs(c,{variant:"destructive",onClick:()=>u(!0),className:"cursor-pointer",disabled:x,children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Delete (",r.size,")"]})]})]}),w?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(L,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(te,{children:[e.jsx(ae,{children:e.jsxs(C,{children:[e.jsx(o,{className:"w-12",children:e.jsx(T,{checked:r.size>0&&r.size===d.length,onCheckedChange:Q,className:"cursor-pointer","aria-label":"Select all products"})}),e.jsx(o,{children:"Image"}),e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Price"}),e.jsx(o,{children:"Category"}),e.jsx(o,{children:"Created"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(re,{children:d.length===0?e.jsx(C,{children:e.jsx(l,{colSpan:7,className:"text-center py-8",children:m?"No products found matching your search":"No products found"})}):d.map(s=>e.jsxs(C,{children:[e.jsx(l,{children:e.jsx(T,{checked:r.has(s.id),onCheckedChange:()=>M(s.id),className:"cursor-pointer","aria-label":`Select ${s.name||"product"}`})}),e.jsx(l,{children:s.imageUrl?e.jsx("div",{className:"h-10 w-10 rounded-md overflow-hidden",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"h-full w-full object-cover"})}):e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-md flex items-center justify-center text-gray-500",children:"No img"})}),e.jsx(l,{className:"font-medium",children:s.name||s.id.substring(0,8)+"..."}),e.jsx(l,{children:A(s.price)}),e.jsx(l,{children:e.jsx(z,{variant:"outline",children:k(s.categoryId)})}),e.jsx(l,{children:y(s.createdAt)}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(c,{className:"cursor-pointer",variant:"outline",size:"sm",onClick:()=>H(s.id),children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsx(c,{className:"cursor-pointer",variant:"outline",size:"sm",onClick:()=>g({to:`/admin/products/edit/${s.id}`}),children:"Edit"}),e.jsxs(c,{variant:"destructive",size:"sm",className:"cursor-pointer",onClick:()=>{n(new Set([s.id])),u(!0)},children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},s.id))})]})}),e.jsx(W,{open:B,onOpenChange:s=>{h(s),s||S(null)},children:e.jsxs(X,{className:"max-w-xl",children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Product Details"}),e.jsx(ee,{children:"Detailed information about this product."})]}),t&&e.jsxs("div",{className:"grid gap-4",children:[t.imageUrl&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-40 w-40 rounded-md overflow-hidden",children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover"})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Product ID:"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.id})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Category:"}),e.jsx("p",{children:e.jsx(z,{variant:"outline",children:k(t.categoryId)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Name:"}),e.jsx("p",{className:"text-sm",children:t.name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Price:"}),e.jsx("p",{className:"text-sm",children:A(t.price)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h3",{className:"font-semibold",children:"Description:"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Created At:"}),e.jsx("p",{className:"text-sm",children:y(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Last Updated:"}),e.jsx("p",{className:"text-sm",children:y(t.updatedAt)})]})]})]}),e.jsxs(se,{children:[e.jsx(c,{variant:"outline",onClick:()=>h(!1),className:"cursor-pointer",children:"Close"}),e.jsx(c,{variant:"outline",onClick:()=>{t&&(h(!1),g({to:`/admin/products/edit/${t.id}`}))},className:"cursor-pointer",children:"Edit Product"}),e.jsxs(c,{variant:"destructive",onClick:()=>{t&&(h(!1),n(new Set([t.id])),u(!0))},className:"cursor-pointer",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Delete Product"]})]})]})}),e.jsx(ce,{open:O,onOpenChange:s=>{u(s),!s&&!x&&n(new Set)},children:e.jsxs(le,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:"Confirm Product Deletion"}),e.jsx(de,{children:r.size>1?`Are you sure you want to delete ${r.size} products? This action cannot be undone.`:"Are you sure you want to delete this product? This action cannot be undone."})]}),e.jsxs(me,{children:[e.jsx(he,{disabled:x,children:"Cancel"}),e.jsx(ue,{onClick:s=>{s.preventDefault(),R()},disabled:x,className:"bg-red-600 text-white hover:bg-red-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}const Te=function(){return e.jsx(pe,{})};export{Te as component};
