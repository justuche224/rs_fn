import{r,j as e,B as m,L as C,t as g}from"./index-iDHF-Q5J.js";import{B as n}from"./badge-BEng1gvB.js";import{T as D,a as P,b as u,c as a,d as I,e as t}from"./table-DJNw3POG.js";import{S as N,a as v,b as y,c as b,d as l}from"./select-U-F52zvu.js";import{g as B}from"./transfers-BsS8U3LZ.js";import{P as V}from"./plus-CW4DvEbg.js";import{F as T}from"./filter-BxYP250L.js";import{L as U}from"./loader-circle-B36KQXTj.js";import{E as k}from"./external-link-CqtSvkNu.js";import"./index-CqimZQQu.js";import"./index-K-UvUWiP.js";import"./chevron-down-Bprd0FQf.js";import"./check-BRf1tYsS.js";function z(){const[c,S]=r.useState([]),[h,j]=r.useState([]),[x,f]=r.useState(!0),[o,L]=r.useState("ALL"),[d,E]=r.useState("ALL"),p=async()=>{try{f(!0);const s=await B();s.success&&s.data?(S(s.data),j(s.data)):g.error(s.error||"Failed to fetch your transfer history")}catch{g.error("Failed to fetch your transfer history")}finally{f(!1)}};r.useEffect(()=>{let s=c;o!=="ALL"&&(s=s.filter(i=>i.status===o)),d!=="ALL"&&(s=s.filter(i=>i.type===d)),j(s)},[o,d,c]);const w=s=>new Date(s).toLocaleString(),R=(s,i)=>`${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:8})} ${i}`,A=s=>{switch(s){case"APPROVED":return e.jsx(n,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(n,{variant:"destructive",children:"Rejected"});default:return e.jsx(n,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}},F=s=>{switch(s){case"INTERNAL":return e.jsx(n,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"Internal"});case"INTER_USER":return e.jsx(n,{variant:"outline",className:"bg-purple-100 text-purple-800",children:"Sent"});default:return e.jsx(n,{variant:"outline",className:"bg-gray-100 text-gray-800",children:s})}};return r.useEffect(()=>{p()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Transfers"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{onClick:p,variant:"outline",disabled:x,className:"cursor-pointer",children:x?"Loading...":"Refresh"}),e.jsx(m,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(C,{to:"/dashboard/transfer",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"New Transfer"]})})]})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row items-end sm:items-center justify-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(N,{value:o,onValueChange:L,children:[e.jsx(v,{className:"w-[180px]",children:e.jsx(y,{placeholder:"Filter by Status"})}),e.jsxs(b,{children:[e.jsx(l,{value:"ALL",children:"All Statuses"}),e.jsx(l,{value:"PENDING",children:"Pending"}),e.jsx(l,{value:"APPROVED",children:"Approved"}),e.jsx(l,{value:"REJECTED",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(N,{value:d,onValueChange:E,children:[e.jsx(v,{className:"w-[180px]",children:e.jsx(y,{placeholder:"Filter by Type"})}),e.jsxs(b,{children:[e.jsx(l,{value:"ALL",children:"All Types"}),e.jsx(l,{value:"INTERNAL",children:"Internal"}),e.jsx(l,{value:"INTER_USER",children:"Sent"})]})]})]})]}),x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(U,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(D,{children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"From"}),e.jsx(a,{children:"To"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Details"})]})}),e.jsx(I,{children:h.length===0?e.jsx(u,{children:e.jsx(t,{colSpan:7,className:"text-center py-8",children:c.length===0?"No transfers found":"No transfers match your filter criteria"})}):h.map(s=>e.jsxs(u,{children:[e.jsx(t,{children:w(s.createdAt)}),e.jsx(t,{children:F(s.type)}),e.jsx(t,{children:s.fromCurrency}),e.jsx(t,{children:s.toCurrency}),e.jsx(t,{className:"font-medium",children:R(s.amount,s.fromCurrency)}),e.jsxs(t,{children:[A(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(t,{className:"text-right",children:e.jsx(m,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(k,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Z=function(){return e.jsx(z,{})};export{Z as component};
