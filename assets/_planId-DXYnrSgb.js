import{aU as j,r as i,j as e,L as d,B as c,t as m,aV as N}from"./index-DwTWZ_dU.js";import{A as b}from"./accent-card-BDtTJEr-.js";import{c as v}from"./investments-rQ1zHE8h.js";import{L as g}from"./loader-circle-DbKlnKOn.js";import"./card-DiD1JaJW.js";import"./proxy-Bm4Fr2jr.js";const k=function(){const{plan:s,balances:n}=j.useLoaderData(),[l,u]=i.useTransition(),[t,x]=i.useState(null),p=a=>`$${parseFloat(a).toFixed(2)}`,r=()=>t?parseFloat(n[t])>=s.price:!1,f=i.useMemo(()=>Object.values(n).some(a=>parseFloat(a)>=s.price),[n,s.price]),h=()=>{!t||!r()||u(async()=>{try{await v({planId:s.id,currency:t}),m.success("Investment submitted",{description:"you can check the status in the history page"}),N({to:"/dashboard/investment-history"})}catch(a){console.error("Error creating investment:",a),m.error(a instanceof Error?a.message:"An error occurred while creating the investment.")}})};return e.jsx("div",{className:"h-full flex flex-col items-center mt-10 w-full",children:e.jsx(b,{title:s.type,description:s.description,footer:e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[t&&!r()&&e.jsxs("div",{className:"text-red-500 text-sm space-y-2 w-full",children:[e.jsxs("p",{children:["Insufficient balance. You need $",s.price," in your"," ",t," account."]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(d,{to:"/dashboard/deposit",className:"flex-1",children:e.jsx(c,{variant:"outline",className:"w-full",children:"Deposit Funds"})}),f&&e.jsx(d,{to:"/dashboard/transfer",className:"flex-1",children:e.jsx(c,{variant:"outline",className:"w-full",children:"Transfer Funds"})})]})]}),e.jsxs(c,{onClick:h,className:"cursor-pointer w-full",disabled:!t||!r()||l,children:[t?`Invest $${s.price} from ${t} account`:"Select an account",l&&e.jsx(g,{className:"mr-2 animate-spin"})]})]}),footerClassName:"w-full",className:"max-w-2xl w-sm mx-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-3xl font-bold",children:["$",s.price]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ROI Range:"}),e.jsxs("span",{className:"font-medium",children:["$",s.minRoiAmount," - $",s.maxRoiAmount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Commission:"}),e.jsxs("span",{className:"font-medium",children:[s.commission,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Percentage:"}),e.jsxs("span",{className:"font-medium",children:[s.percentage,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Duration:"}),e.jsxs("span",{className:"font-medium",children:[s.duration," months"]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select account to invest with:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(n).map(([a,o])=>e.jsx("div",{onClick:()=>x(a),className:`
                    p-3 border rounded-lg cursor-pointer transition-colors
                    ${t===a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}
                  `,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:a}),e.jsx("span",{className:parseFloat(o)>=s.price?"text-green-600":"",children:p(o)})]})},a))})]})]})})})};export{k as component};
