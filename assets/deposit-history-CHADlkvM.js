import{r as t,j as e,B as m,L as v,t as y}from"./index-Ckkvuujd.js";import{B as c}from"./badge-dIKJQ4tX.js";import{T as S,a as E,b as x,c as r,d as L,e as a}from"./table-CyhYI2xP.js";import{S as w,a as F,b as R,c as A,d as i}from"./select-CIpfmNf7.js";import{g as C}from"./deposits-Cql5x4Rm.js";import{P}from"./plus-o7MnLWCK.js";import{F as T}from"./filter-D6D8y9Hl.js";import{L as B}from"./loader-circle-ByqrKCx2.js";import{E as I}from"./external-link-DSzfUhFY.js";import"./index-CQWN3qM6.js";import"./index-DESK7ccS.js";import"./chevron-down-Bdw0w7H_.js";import"./check-DRFK1lWj.js";function k(){const[l,f]=t.useState([]),[u,h]=t.useState([]),[o,j]=t.useState(!0),[n,g]=t.useState("ALL"),p=async()=>{try{j(!0);const s=await C();f(s),h(s)}catch{y.error("Failed to fetch your deposit history")}finally{j(!1)}};t.useEffect(()=>{let s=l;n!=="ALL"&&(s=s.filter(d=>d.status===n)),h(s)},[n,l]);const N=s=>new Date(s).toLocaleString(),b=(s,d)=>`${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:8})} ${d}`,D=s=>{switch(s){case"APPROVED":return e.jsx(c,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(c,{variant:"destructive",children:"Rejected"});case"FAILED":return e.jsx(c,{className:"bg-gray-500",children:"Failed"});default:return e.jsx(c,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return t.useEffect(()=>{p()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Deposits"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{onClick:p,variant:"outline",disabled:o,className:"cursor-pointer",children:o?"Loading...":"Refresh"}),e.jsx(m,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(v,{to:"/dashboard/deposit",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Make Deposit"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(w,{value:n,onValueChange:g,children:[e.jsx(F,{className:"w-[180px]",children:e.jsx(R,{placeholder:"Filter by Status"})}),e.jsxs(A,{children:[e.jsx(i,{value:"ALL",children:"All Statuses"}),e.jsx(i,{value:"PENDING",children:"Pending"}),e.jsx(i,{value:"APPROVED",children:"Approved"}),e.jsx(i,{value:"REJECTED",children:"Rejected"}),e.jsx(i,{value:"FAILED",children:"Failed"})]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(B,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(S,{children:[e.jsx(E,{children:e.jsxs(x,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Wallet ID"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Details"})]})}),e.jsx(L,{children:u.length===0?e.jsx(x,{children:e.jsx(a,{colSpan:5,className:"text-center py-8",children:l.length===0?"No deposits found":"No deposits match your filter criteria"})}):u.map(s=>e.jsxs(x,{children:[e.jsx(a,{children:N(s.createdAt)}),e.jsx(a,{className:"font-mono text-sm",children:s.systemWalletId.substring(0,8)+"..."}),e.jsx(a,{className:"font-medium",children:b(s.amount,s.currency)}),e.jsxs(a,{children:[D(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(a,{className:"text-right",children:e.jsx(m,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(I,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const X=function(){return e.jsx(k,{})};export{X as component};
