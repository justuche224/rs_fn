import{r as i,u as C,z as d,j as s,c as I,B as R,t as l,a as k,e as E}from"./index-BEVrYtTE.js";import{I as p}from"./input-xCvFL3v3.js";import{A}from"./accent-card-D1wS23YL.js";import{u as B,s as L,F as _,a as h,b as f,c as j,d as g,e as w,f as q,g as z}from"./form-success-C_hBg3VC.js";import{L as T}from"./loader-circle-BHrUPW0b.js";import"./card-hYrkAxgT.js";import"./proxy-DbwVEuLZ.js";import"./label-CUDH9A7f.js";import"./triangle-alert-zXjHdhyg.js";import"./circle-check-DCCF0uBI.js";function M({token:n,invalidToken:r,className:c,...P}){const[a,v]=i.useTransition(),[o,m]=i.useState(r??""),[b,u]=i.useState(""),N=C(),y=d.object({password:d.string().min(6,"Password must be at least 6 characters long").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/\d/,"Password must contain at least one number").regex(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:d.string().min(8)}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match"}),t=B({resolver:L(y),defaultValues:{password:"",confirmPassword:""}});function F(e){if(r){l.error("Invalid Token");return}if(!n){l.error("Invalid Token");return}m(void 0),u(void 0),v(async()=>{const{error:x}=await k.resetPassword({newPassword:e.password,token:n},{onSuccess:()=>{u("Password updated!"),l.success("Password updated!",{description:"You can now login to your account",duration:5e3,position:"top-right",icon:"ðŸ”‘"}),N({to:"/sign-in"})},onError:S=>{m(S.error.message)}});x&&console.error(x)})}return s.jsxs("div",{className:I("flex flex-col gap-6",c),...P,children:[s.jsx(A,{className:"overflow-hidden",children:s.jsxs("div",{className:"grid p-0 md:grid-cols-2",children:[s.jsx(_,{...t,children:s.jsx("form",{onSubmit:t.handleSubmit(F),className:"p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Reset Password"}),s.jsx("p",{className:"text-balance text-muted-foreground",children:"Create a new Password"})]}),s.jsx("div",{className:"grid gap-2",children:s.jsx(h,{control:t.control,name:"password",disabled:a||o===r,render:({field:e})=>s.jsxs(f,{children:[s.jsx(j,{children:"Password"}),s.jsx(g,{children:s.jsx(p,{...e,type:"password",placeholder:"********",required:!0})}),s.jsx(w,{})]})})}),s.jsx("div",{className:"grid gap-2",children:s.jsx(h,{control:t.control,name:"confirmPassword",disabled:a||o===r,render:({field:e})=>s.jsxs(f,{children:[s.jsx(j,{children:"Confirm Password"}),s.jsx(g,{children:s.jsx(p,{...e,type:"password",placeholder:"********",required:!0})}),s.jsx(w,{})]})})}),s.jsx(q,{message:o}),s.jsx(z,{message:b}),s.jsx(R,{type:"submit",className:"w-full",disabled:a||o===r,children:a?s.jsx(T,{className:"animate-spin"}):s.jsx("span",{children:"Reset Password"})})]})})}),s.jsx("div",{className:"relative hidden bg-muted md:block",children:s.jsx("img",{src:"/auth-image.jpg",alt:"Image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale hover:dark:brightness-100 hover:dark:grayscale-0 transition-all duration-300"})})]})}),s.jsxs("div",{className:"text-balance text-center text-xs text-muted-foreground [&_a]:underline [&_a]:underline-offset-4 hover:[&_a]:text-primary",children:["By clicking continue, you agree to our ",s.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",s.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})}const Q=function(){const{token:r,error:c}=E.useSearch();return s.jsx("div",{className:"flex min-h-svh flex-col items-center justify-center p-6 md:p-10",children:s.jsx("div",{className:"w-full max-w-sm md:max-w-3xl",children:s.jsx(M,{token:r,invalidToken:c})})})};export{Q as component};
