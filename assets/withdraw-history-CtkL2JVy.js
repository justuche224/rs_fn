import{r as t,j as e,B as d,L as w,t as y}from"./index-BcThUyoc.js";import{B as m}from"./badge-aZVf5uL7.js";import{T as S,a as E,b as u,c as r,d as L,e as a}from"./table-9uzXJ2T6.js";import{S as A,a as D,b as R,c as C,d as l}from"./select-DJDe6e3w.js";import{g as F}from"./withdrawal-B353V0pc.js";import{P}from"./plus-ClX1FaV9.js";import{F as T}from"./filter-BZJhFdll.js";import{L as W}from"./loader-circle-Da9QICMK.js";import{E as B}from"./external-link-Ben9ZpgA.js";import"./index-C8fnvf32.js";import"./index-C-fh5zPu.js";import"./chevron-down-hX2_8D7Z.js";import"./check-r9DD2Qp9.js";function V(){const[i,p]=t.useState([]),[h,x]=t.useState([]),[c,j]=t.useState(!0),[n,g]=t.useState("ALL"),f=async()=>{try{j(!0);const s=await F();p(s),x(s)}catch{y.error("Failed to fetch your withdrawal history")}finally{j(!1)}};t.useEffect(()=>{let s=i;n!=="ALL"&&(s=s.filter(o=>o.status===n)),x(s)},[n,i]);const N=s=>new Date(s).toLocaleString(),b=(s,o)=>`${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:8})} ${o}`,v=s=>{switch(s){case"APPROVED":return e.jsx(m,{className:"bg-green-500",children:"Approved"});case"REJECTED":return e.jsx(m,{variant:"destructive",children:"Rejected"});default:return e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return t.useEffect(()=>{f()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Withdrawals"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:f,variant:"outline",disabled:c,className:"cursor-pointer",children:c?"Loading...":"Refresh"}),e.jsx(d,{asChild:!0,className:"cursor-pointer bg-blue-600 hover:bg-blue-700",children:e.jsxs(w,{to:"/dashboard/withdraw",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"New Withdrawal"]})})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-end gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(A,{value:n,onValueChange:g,children:[e.jsx(D,{className:"w-[180px]",children:e.jsx(R,{placeholder:"Filter by Status"})}),e.jsxs(C,{children:[e.jsx(l,{value:"ALL",children:"All Statuses"}),e.jsx(l,{value:"PENDING",children:"Pending"}),e.jsx(l,{value:"APPROVED",children:"Approved"}),e.jsx(l,{value:"REJECTED",children:"Rejected"})]})]})]}),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(W,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(S,{children:[e.jsx(E,{children:e.jsxs(u,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Destination Address"}),e.jsx(r,{children:"Amount"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Details"})]})}),e.jsx(L,{children:h.length===0?e.jsx(u,{children:e.jsx(a,{colSpan:5,className:"text-center py-8",children:i.length===0?"No withdrawals found":"No withdrawals match your filter criteria"})}):h.map(s=>e.jsxs(u,{children:[e.jsx(a,{children:N(s.createdAt)}),e.jsx(a,{className:"font-mono text-sm",children:s.destinationAddress.substring(0,8)+"..."}),e.jsx(a,{className:"font-medium",children:b(s.amount,s.currency)}),e.jsxs(a,{children:[v(s.status),s.rejectionReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Reason: ",s.rejectionReason]})]}),e.jsx(a,{className:"text-right",children:e.jsx(d,{variant:"ghost",size:"sm",className:"cursor-pointer text-blue-500",children:e.jsx(B,{className:"h-4 w-4"})})})]},s.id))})]})})]})}const Y=function(){return e.jsx(V,{})};export{Y as component};
