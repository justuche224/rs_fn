import{r,u as E,j as e,B as t,t as h}from"./index-D2wGeYxt.js";import{B as z}from"./badge-Lh-Dmy7I.js";import{D as H,a as Q,b as P,c as F,d as W}from"./dialog-DmJaS50R.js";import{T as q,a as I,b as u,c as l,d as M,e as n}from"./table-CUnS-ku8.js";import{A as U,a as $,b as G,c as J,d as K,e as V,f as X,g as Y}from"./alert-dialog-toE-wEt5.js";import{a as Z,d as _}from"./wallets-DM-BgTRQ.js";import{L as j}from"./loader-circle-D1K0hxel.js";import{P as ee}from"./plus-CGiOVluC.js";import{C as D}from"./check-CI6mM0wF.js";import{C as v}from"./copy-DlEG9WI1.js";import{E as se}from"./eye-Dx2cztMx.js";import{T as A}from"./trash-2-Ck2i5TQn.js";function ae(){const[c,T]=r.useState([]),[o,p]=r.useState(!0),[a,i]=r.useState(null),[S,g]=r.useState(!1),[B,d]=r.useState(!1),[m,f]=r.useState(null),[N,y]=r.useState(null),k=E(),x=async()=>{try{p(!0);const s=await Z();T(s)}catch{h.error("Failed to fetch system wallets")}finally{p(!1)}},R=async s=>{f(s);try{await _(s),h.success("Wallet deleted successfully"),x(),d(!1)}catch{h.error("Failed to delete wallet")}finally{f(null)}},C=s=>{navigator.clipboard.writeText(s),y(s),setTimeout(()=>y(null),2e3)},L=s=>{i(s),g(!0)},b=s=>new Date(s).toLocaleString(),O=s=>{const w={BTC:"bg-orange-500",ETH:"bg-purple-500",USDT:"bg-green-500",SOL:"bg-blue-500",BNB:"bg-yellow-500",LTC:"bg-gray-500"};return e.jsx(z,{className:`${w[s]||"bg-gray-400"}`,children:s})};return r.useEffect(()=>{x()},[]),e.jsxs("div",{className:"container mx-auto py-6 md:w-[90%] lg:w-[85%] px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"System Wallets Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{onClick:x,disabled:o,variant:"outline",className:"cursor-pointer",children:o?e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}):"Refresh"}),e.jsxs(t,{onClick:()=>k({to:"/admin/wallets/new"}),className:"cursor-pointer",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"Add Wallet"]})]})]}),o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(j,{className:"animate-spin",size:40})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(q,{children:[e.jsx(I,{children:e.jsxs(u,{children:[e.jsx(l,{children:"Currency"}),e.jsx(l,{children:"Address"}),e.jsx(l,{children:"Created"}),e.jsx(l,{children:"Last Updated"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(M,{children:c.length===0?e.jsx(u,{children:e.jsx(n,{colSpan:5,className:"text-center py-8",children:"No system wallets found"})}):c.map(s=>e.jsxs(u,{children:[e.jsx(n,{children:O(s.currency)}),e.jsx(n,{className:"font-mono text-sm max-w-[200px]",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"truncate",children:s.address}),e.jsx(t,{variant:"ghost",size:"sm",className:"ml-2 h-8 w-8 p-0 cursor-pointer",onClick:()=>C(s.address),children:N===s.address?e.jsx(D,{className:"h-4 w-4 text-green-500"}):e.jsx(v,{className:"h-4 w-4"})})]})}),e.jsx(n,{children:b(s.createdAt)}),e.jsx(n,{children:b(s.updatedAt)}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(t,{className:"cursor-pointer",variant:"outline",size:"sm",onClick:()=>L(s),children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"QR Code"]}),e.jsxs(t,{variant:"destructive",size:"sm",className:"cursor-pointer",onClick:()=>{i(s),d(!0)},disabled:m===s.id,children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},s.id))})]})}),e.jsx(H,{open:S,onOpenChange:s=>{g(s),s||i(null)},children:e.jsxs(Q,{className:"max-w-md",children:[e.jsxs(P,{children:[e.jsx(F,{children:"Wallet QR Code"}),e.jsxs(W,{children:[a==null?void 0:a.currency," wallet address:"," ",a==null?void 0:a.address]})]}),a&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"border rounded-md overflow-hidden p-2 bg-white",children:e.jsx("img",{src:a.qrCode,alt:`${a.currency} Wallet QR Code`,className:"w-60 h-60 object-contain"})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm truncate max-w-[200px]",children:a.address}),e.jsx(t,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>C(a.address),children:N===a.address?e.jsx(D,{className:"h-4 w-4 text-green-500"}):e.jsx(v,{className:"h-4 w-4"})})]})]})]})}),e.jsx(U,{open:B,onOpenChange:s=>{d(s),s||i(null)},children:e.jsxs($,{children:[e.jsxs(G,{children:[e.jsx(J,{children:"Delete System Wallet"}),e.jsxs(K,{children:["Are you sure you want to delete this ",a==null?void 0:a.currency," ","wallet? This action cannot be undone."]})]}),e.jsxs(V,{children:[e.jsx(X,{className:"cursor-pointer",children:"Cancel"}),e.jsxs(Y,{className:"bg-destructive text-destructive-foreground cursor-pointer",onClick:()=>a&&R(a.id),disabled:m===(a==null?void 0:a.id),children:[m===(a==null?void 0:a.id)?e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}const je=function(){return e.jsx(ae,{})};export{je as component};
