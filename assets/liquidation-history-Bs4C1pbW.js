import{s as L,r as t,j as e,B as S,t as E}from"./index-iDHF-Q5J.js";import{B as m}from"./badge-BEng1gvB.js";import{C as f,c as T,d as A,a as g}from"./card-Bzf_1tml.js";import{T as F,a as R,b as N,c as a,d as P,e as r}from"./table-DJNw3POG.js";import{I as D}from"./input-C7dhJJKf.js";import{S as k,a as B,b as q,c as I,d as i}from"./select-U-F52zvu.js";import{g as H}from"./liquidation-5DG90TT6.js";import{L as O}from"./loader-circle-B36KQXTj.js";import{I as V}from"./info-Dj-ICVi4.js";import{C as M}from"./clock-D-lmOgFW.js";import{T as U}from"./thumbs-up-BRuuVXQA.js";import{C as G}from"./circle-x-d5rvpSOx.js";import{S as J}from"./search-qJBeEA4i.js";import{F as Q}from"./filter-BxYP250L.js";import"./index-CqimZQQu.js";import"./index-K-UvUWiP.js";import"./chevron-down-Bprd0FQf.js";import"./check-BRf1tYsS.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$=L("CircleCheckBig",_),ue=function(){const[c,v]=t.useState([]),[d,h]=t.useState([]),[x,j]=t.useState(!0),[n,w]=t.useState(""),[o,C]=t.useState("ALL"),p=async()=>{try{j(!0);const s=await H();v(s),h(s)}catch{E.error("Failed to fetch liquidation history")}finally{j(!1)}};t.useEffect(()=>{p()},[]),t.useEffect(()=>{let s=c;if(n){const l=n.toLowerCase();s=s.filter(u=>u.targetCrypto.toLowerCase().includes(l)||u.sourceCurrency.toLowerCase().includes(l)||u.walletProvider.toLowerCase().includes(l))}o!=="ALL"&&(s=s.filter(l=>l.status===o)),h(s)},[n,o,c]);const b=s=>new Date(s).toLocaleString(),y=s=>{switch(s){case"COMPLETED":return e.jsx(m,{className:"bg-green-500",children:"Completed"});case"APPROVED":return e.jsx(m,{className:"bg-blue-500",children:"Approved"});case"REJECTED":return e.jsx(m,{variant:"destructive",children:"Rejected"});default:return e.jsx(m,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Pending"})}};return x?e.jsx("div",{className:"flex h-full min-h-96 items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"mx-auto h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"mt-2 text-lg",children:"Loading liquidation history..."})]})}):e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Liquidation History"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track all your asset liquidation requests"})]}),e.jsx(S,{onClick:p,disabled:x,children:x?"Loading...":"Refresh"})]}),e.jsxs(f,{className:"mb-6 border-blue-200 bg-blue-50/50",children:[e.jsx(T,{className:"pb-3",children:e.jsxs(A,{className:"text-base flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-blue-600"}),"Understanding Liquidation Statuses"]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(M,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Pending"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your request is awaiting admin review"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(U,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Approved"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin approved. Funds are being processed"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx($,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Completed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Funds sent to your wallet. Balance deducted"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(G,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Rejected"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Request denied. See reason below status"})]})]})]})})]}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"flex items-center gap-2 w-full md:w-1/2",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(J,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search by crypto, currency, or wallet...",value:n,onChange:s=>w(s.target.value),className:"pl-8 w-full"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(k,{value:o,onValueChange:C,children:[e.jsx(B,{className:"w-[180px]",children:e.jsx(q,{placeholder:"Filter by Status"})}),e.jsxs(I,{children:[e.jsx(i,{value:"ALL",children:"All Statuses"}),e.jsx(i,{value:"PENDING",children:"Pending"}),e.jsx(i,{value:"APPROVED",children:"Approved"}),e.jsx(i,{value:"COMPLETED",children:"Completed"}),e.jsx(i,{value:"REJECTED",children:"Rejected"})]})]})]})]}),d.length===0?e.jsx(f,{children:e.jsx(g,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:c.length===0?"No liquidation requests yet":"No liquidations match your search criteria"})})}):e.jsx("div",{className:"bg-sidebar rounded-lg shadow overflow-hidden",children:e.jsxs(F,{children:[e.jsx(R,{children:e.jsxs(N,{children:[e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Source"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Target"}),e.jsx(a,{children:"Network"}),e.jsx(a,{children:"Gas Fee"}),e.jsx(a,{children:"Status"})]})}),e.jsx(P,{children:d.map(s=>e.jsxs(N,{children:[e.jsx(r,{className:"text-sm",children:b(s.createdAt)}),e.jsx(r,{children:e.jsx("span",{className:"font-medium",children:s.sourceCurrency})}),e.jsxs(r,{children:["$",parseFloat(s.sourceAmount).toFixed(2)]}),e.jsx(r,{children:e.jsx("span",{className:"font-medium",children:s.targetCrypto})}),e.jsx(r,{className:"text-sm text-muted-foreground",children:s.targetNetwork}),e.jsxs(r,{children:["$",parseFloat(s.gasFeeAmount).toFixed(2)]}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[y(s.status),s.rejectionReason&&e.jsx("span",{className:"text-xs text-red-500",children:s.rejectionReason})]})})]},s.id))})]})}),d.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground text-center",children:["Showing ",d.length," of ",c.length," ","liquidations"]})]})};export{ue as component};
