import{b as N,a7 as D,r as d,j as e,B as u}from"./index-Ci8F2kN6.js";import{C as c,c as o,d as x,e as m,a as g,b as T}from"./card-BxZdOqrQ.js";import{T as L,a as A,b as h,c as p}from"./tabs-DqvY2S_b.js";import{S as t}from"./skeleton-CC8nNeWI.js";import{C as U}from"./check-Vbwjt8x8.js";import{C as E}from"./copy-Nj032-BG.js";import{S as F}from"./share-2-BJ2Tg7Hq.js";import{U as I}from"./users-CoZy2eS4.js";const $=async()=>(await N.get("https://server.resonantfinance.org/api/referrals",{withCredentials:!0})).data.data,P=async()=>(await N.get("https://server.resonantfinance.org/api/referrals/stats",{withCredentials:!0})).data.data,K=function(){const{user:v}=D.useLoaderData(),l=`https://resonantfinance.org/ref/${v.id}`,[k,f]=d.useState(!1),[s,w]=d.useState([]),[a,C]=d.useState(null),[n,y]=d.useState(!0);d.useEffect(()=>{(async()=>{y(!0);try{const[i,R]=await Promise.all([$(),P()]);w(i),C(R)}catch(i){console.error("Failed to fetch referral data:",i)}finally{y(!1)}})()},[]);const b=()=>{navigator.clipboard.writeText(l),f(!0),setTimeout(()=>f(!1),2e3)},S=async()=>{if(navigator.share)try{await navigator.share({title:"Join using my referral link",text:"Use my referral link to sign up and we both get rewards!",url:l})}catch(r){console.log("Error sharing:",r)}else b()};return e.jsxs("div",{className:"container px-4 py-8 mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-50",children:"Referral Program"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Invite friends and earn rewards when they sign up using your link."}),e.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-400",children:[e.jsx("strong",{children:"Important:"})," Attempting to abuse the referral system by creating fake accounts or engaging in fraudulent activities may result in account suspension or permanent ban. All referrals are subject to verification."]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(c,{className:"col-span-3 md:col-span-2",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Your Referral Link"}),e.jsx(m,{children:"Share this link with friends to earn rewards"})]}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap rounded-md border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 px-3 py-2 text-sm",children:l})}),e.jsx(u,{variant:"outline",size:"icon",onClick:b,className:"transition-all duration-200",children:k?e.jsx(U,{className:"h-4 w-4 text-green-500"}):e.jsx(E,{className:"h-4 w-4"})}),e.jsx(u,{variant:"outline",size:"icon",onClick:S,children:e.jsx(F,{className:"h-4 w-4"})})]})}),e.jsx(T,{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Earn ",e.jsx("span",{className:"font-semibold text-primary",children:"$10"})," for each friend who signs up and makes their first deposit"]})})]}),e.jsxs(c,{className:"col-span-3 md:col-span-1",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Your Stats"}),e.jsx(m,{children:"Referral performance overview"})]}),e.jsx(g,{className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"h-16 w-full"}),e.jsx(t,{className:"h-16 w-full"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Referrals"}),e.jsxs("div",{className:"mt-1 flex items-baseline",children:[e.jsx("div",{className:"text-3xl font-semibold",children:(a==null?void 0:a.totalReferrals)||0}),e.jsx("div",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"people"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Rewards"}),e.jsxs("div",{className:"mt-1 flex items-baseline",children:[e.jsx("div",{className:"text-3xl font-semibold",children:(a==null?void 0:a.totalRewards)||"0.00"}),e.jsx("div",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:(a==null?void 0:a.currency)||"USD"})]})]})]})})]}),e.jsxs(c,{className:"col-span-3",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Referral Activity"}),e.jsx(m,{children:"Recent referrals and their status"})]}),e.jsx(g,{children:e.jsxs(L,{defaultValue:"all",children:[e.jsxs(A,{className:"mb-4",children:[e.jsx(h,{value:"all",children:"All Referrals"}),e.jsx(h,{value:"pending",children:"Pending"}),e.jsx(h,{value:"completed",children:"Completed"})]}),e.jsx(p,{value:"all",className:"space-y-4",children:n?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"h-16 w-full"}),e.jsx(t,{className:"h-16 w-full"}),e.jsx(t,{className:"h-16 w-full"})]}):s&&s.length>0?e.jsxs("div",{className:"rounded-md border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-4 text-sm font-medium text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"col-span-3",children:"User"}),e.jsx("div",{className:"col-span-3",children:"Date"}),e.jsx("div",{className:"col-span-3",children:"Status"}),e.jsx("div",{className:"col-span-3",children:"Reward"})]}),s.map(r=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-4 text-sm border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{className:"col-span-3 font-medium text-gray-900 dark:text-gray-100",children:[r.referreeId.substring(0,8),"..."]}),e.jsx("div",{className:"col-span-3 text-gray-600 dark:text-gray-400",children:new Date(r.createdAt).toLocaleDateString()}),e.jsx("div",{className:"col-span-3",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 dark:bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-800 dark:text-green-400",children:"Completed"})}),e.jsx("div",{className:"col-span-3 text-gray-900 dark:text-gray-100",children:"$10.00"})]},r.id))]}):e.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(I,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:"No referrals yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Share your referral link to start earning rewards."})]})})}),e.jsx(p,{value:"pending",children:e.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-8",children:e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"No pending referrals"})})})}),e.jsx(p,{value:"completed",children:n?e.jsx(t,{className:"h-16 w-full"}):s&&s.length>0?e.jsxs("div",{className:"rounded-md border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-4 text-sm font-medium text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"col-span-3",children:"User"}),e.jsx("div",{className:"col-span-3",children:"Date"}),e.jsx("div",{className:"col-span-3",children:"Status"}),e.jsx("div",{className:"col-span-3",children:"Reward"})]}),s.map(r=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-4 text-sm border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{className:"col-span-3 font-medium text-gray-900 dark:text-gray-100",children:[r.referreeId.substring(0,8),"..."]}),e.jsx("div",{className:"col-span-3 text-gray-600 dark:text-gray-400",children:new Date(r.createdAt).toLocaleDateString()}),e.jsx("div",{className:"col-span-3",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 dark:bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-800 dark:text-green-400",children:"Completed"})}),e.jsx("div",{className:"col-span-3 text-gray-900 dark:text-gray-100",children:"$10.00"})]},r.id))]}):e.jsx("div",{className:"rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-8",children:e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"No completed referrals"})})})})]})})]})]})]})};export{K as component};
