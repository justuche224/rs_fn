import{r as n,u as k,z as c,j as e,c as C,L as u,B as E,a as R,t as A,d as I}from"./index-DxiJ_hAo.js";import{I as x}from"./input-fcaz1Jsr.js";import{u as z,F as P,a as g,b as f,c as p,d as h,e as j,f as $,g as q,s as B}from"./form-success-GVyGQM14.js";import{L as T}from"./loader-circle-DzhmYEl5.js";import{A as V}from"./arrow-right-mKY9atC3.js";import"./label-T0eg7t1W.js";import"./triangle-alert-BSwE9UZQ.js";import"./circle-check-BR6gJ1fL.js";function D({callbackURL:i="/dashboard",className:l,...b}){const[r,w]=n.useTransition(),[N,a]=n.useState(""),[v,m]=n.useState(""),y=k(),F=c.object({email:c.string().email(),password:c.string().min(8)}),o=z({resolver:B(F),defaultValues:{email:"",password:""}});function S(s){console.log("start login"),a(void 0),m(void 0),w(async()=>{const{error:d}=await R.signIn.email({email:s.email,password:s.password,callbackURL:`${window.location.origin}${i}`},{onSuccess:()=>{console.log("login success"),y({to:i})},onError(t){if(console.log("login error"),t.error.status===403)A.error("Verify your email!"),m("A link to verify your email has been sent to your inbox.");else if(t.error.status===429){const L=t.error.headers.get("X-Retry-After");a(`Clicking too fast! Please wait ${L} seconds before trying again.`)}else a(t.error.message)}});d&&a(d.message)})}return e.jsx(P,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(S),className:C("flex flex-col gap-6",l),...b,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Login to your account"}),e.jsx("p",{className:"text-balance text-sm text-muted-foreground",children:"Enter your email below to login to your account"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(g,{control:o.control,name:"email",disabled:r,render:({field:s})=>e.jsxs(f,{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"email",children:"Email"}),e.jsx(h,{children:e.jsx(x,{...s,id:"email",type:"email",placeholder:"m@example.com",required:!0,autoComplete:"email"})}),e.jsx(j,{})]})}),e.jsx(g,{control:o.control,name:"password",disabled:r,render:({field:s})=>e.jsxs(f,{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{htmlFor:"password",children:"Password"}),e.jsx(u,{to:"/forgot-password",className:"ml-auto text-sm underline-offset-4 hover:underline",children:"Forgot your password?"})]}),e.jsx(h,{children:e.jsx(x,{...s,id:"password",type:"password",required:!0})}),e.jsx(j,{})]})}),e.jsx($,{message:N}),e.jsx(q,{message:v}),e.jsx(E,{disabled:r,type:"submit",className:"w-full",children:r?e.jsx(T,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:["Login ",e.jsx(V,{className:"ml-2 h-4 w-4"})]})}),e.jsx("div",{className:"relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t after:border-border",children:e.jsx("span",{className:"relative z-10 bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(u,{to:"/sign-up",className:"underline underline-offset-4",children:"Sign up"})]})]})})}const Q=function(){const{callbackURL:l}=I.useSearch();return e.jsxs("div",{className:"grid min-h-svh lg:grid-cols-2",children:[e.jsx("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("div",{className:"w-full max-w-xs",children:e.jsx(D,{callbackURL:l})})})}),e.jsx("div",{className:"relative hidden bg-muted lg:block",children:e.jsx("img",{src:"/assets/images/banner/banner-bg3.jpg",alt:"Image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale"})})]})};export{Q as component};
